!function(){"use strict";function e(e,t,o){function n(n,l,r){function s(){return g.css("top"),n.horizontalScroll?(n.getBarWidth(),n.makeBarDraggableHorizontal()):(n.getBarHeight(),n.makeBarDraggable()),n.alwaysVisible||g.css({display:"none"}),n.attachWheel(h),!0}a(n,l,r);var c,h=l[0],d=30,u=!1,f=30;l.css({overflow:"hidden",width:n.width,height:n.height});var p=angular.element("<div></div>");p.css({position:"relative",overflow:"hidden",width:n.width,height:n.height});var g=i(n);if(l.wrap(p),l.append(g),o(g)(n),l.on("mouseenter",function(){n.horizontalScroll?n.getBarWidth():n.getBarHeight()}),l.on("mouseleave",function(){n.alwaysVisible||g.css({display:"none"})}),n.makeBarDraggable=function(){g.bind("mousedown",function(t){var o=parseFloat(g.css("top")),i=t.pageY,a=!0;e.bind("mousemove",function(e){g.css({top:o+e.pageY-i+"px"}),n.scrollContent(0,g[0].offsetTop,!1)}),e.bind("mouseup",function(t){a=!1,e.unbind("mousemove")})}).bind("selectstart",function(e){return e.preventDefault(),e.stopPropagation(),!1})},n.makeBarDraggableHorizontal=function(){g.bind("mousedown",function(t){var o=parseFloat(g.css("left")),i=t.pageX,a=!0;e.bind("mousemove",function(e){g.css({left:o+e.pageX-i+"px"}),n.scrollContentHorizontal(0,g[0].offsetLeft,!1)}),e.bind("mouseup",function(t){a=!1,e.unbind("mousemove")})}).bind("selectstart",function(e){return e.preventDefault(),e.stopPropagation(),!1})},n.getBarHeight=function(){var e=Math.max(h.offsetHeight/h.scrollHeight*h.offsetHeight,d),t=e===h.offsetHeight?"none":"block";g.css({height:e+"px",display:t})},n.getBarWidth=function(){var e=Math.max(h.offsetWidth/h.scrollWidth*h.offsetWidth,f),t=e===h.offsetWidth?"none":"block";g.css({width:e+"px",display:t})},n.attachWheel=function(o){t.addEventListener?(o.addEventListener("DOMMouseScroll",n.onWheel,!1),o.addEventListener("mousewheel",n.onWheel,!1)):e.addEventListener("onmousewheel",n.onWheel)},n.detachWheel=function(o){t.removeEventListener?(o.removeEventListener("DOMMouseScroll",n.onWheel,!1),o.removeEventListener("mousewheel",n.onWheel,!1)):e.removeEventListener("onmousewheel",n.wheel)},n.onWheel=function(e){e=e||t.event;var o=0;e.wheelDelta&&(o=-e.wheelDelta/120),e.detail&&(o=e.detail/3),n.horizontalScroll?n.scrollContentHorizontal(o,!0):n.scrollContent(o,!0),e.preventDefault&&!u&&e.preventDefault(),u||(e.returnValue=!1)},n.scrollContent=function(e,t){u=!1;var o,i=e,a=h.offsetHeight-g[0].offsetHeight;t&&(i=parseInt(g.css("top"),10)+e*parseInt(n.wheelStep,10)/100*g[0].offsetHeight,i=Math.min(Math.max(i,0),a),i=e>0?Math.ceil(i):Math.floor(i),g.css({top:i+"px"})),o=parseInt(g.css("top"),10)/(h.offsetHeight-g[0].offsetHeight),i=o*(h.scrollHeight-h.offsetHeight),h.scrollTop=i},n.scrollContentHorizontal=function(e,t){u=!1;var o,i=e,a=h.offsetWidth-g[0].offsetWidth;t&&(i=parseInt(g.css("left"),10)+e*parseInt(n.wheelStep,10)/100*g[0].offsetWidth,i=Math.min(Math.max(i,0),a),i=e>0?Math.ceil(i):Math.floor(i),g.css({left:i+"px"})),o=parseInt(g.css("left"),10)/(h.offsetWidth-g[0].offsetWidth),i=o*(h.scrollWidth-h.offsetWidth),h.scrollLeft=i},l.bind("touchstart",function(e,t){e.touches.length&&(c=e.touches[0].pageY)}),l.bind("touchmove",function(e){if(u||e.preventDefault(),e.touches.length){var t=(c-e.touches[0].pageY)/n.touchScrollStep;n.horizontalScroll?n.scrollContentHorizontal(t,!0):n.scrollContent(t,!0),c=e.touches[0].pageY}}),r.$observe("enabled",function(){n.enabled=n.$eval(r.enabled),n.enabled===!1?(g.remove(),n.detachWheel(h)):(l.append(g),n.attachWheel(h))}),n.watchContent){var v=n.$watch(function(){return l.html()},function(){s()});n.$on("$destroy",function(){v()})}s()}function i(e){var t,o,n={background:e.color,position:"absolute",opacity:e.opacity,display:e.alwaysVisible?"block":"none","border-radius":e.borderRadius,"z-index":e.zIndex,cursor:"pointer"};return e.horizontalScroll?(t=angular.element('<div ng-mousedown="makeBarDraggableHorizontal($event)"></div>'),n=angular.extend(n,{height:e.size,left:"0"}),o="bottom"===e.horizontalScrollPosition?{bottom:e.distance}:{top:e.distance}):(t=angular.element('<div ng-mousedown="makeBarDraggable($event)""></div>'),n=angular.extend(n,{width:e.size,top:"0"}),o="right"===e.position?{right:e.distance}:{left:e.distance}),n=angular.extend(n,o),t.css(n),t}function a(e,t,o){var n=void 0;n=0!==o.height&&void 0!==o.height?o.height:0!==t[0].clientHeight?t[0].clientHeight:250,e.width=o.width||t[0].clientWidth||"auto",e.height=n,e.size=o.size||"7px",e.color=o.color||"#000",e.position=o.position||"right",e.distance=o.distance||"1px",e.borderRadius=o.borderRadius||"3px",e.start=o.start||"top",e.alwaysVisible=e.$eval(o.alwaysVisible)!==!1,e.barDraggable=e.$eval(o.barDraggable)!==!1,e.wheelStep=o.wheelStep||20,e.opacity=o.opacity||.5,e.enabled=e.$eval(o.enabled)!==!1,e.horizontalScroll=e.$eval(o.horizontalScroll)||!1,e.horizontalScrollPosition=o.horizontalScrollPosition||"bottom",e.touchScrollStep=o.touchScrollStep||200,e.watchContent=e.$eval(o.watchContent)||!1,e.zIndex=o.zIndex||"99"}return{restrict:"A",scope:!0,link:n}}angular.module("jkuri.slimscroll",[]).directive("ngSlimscroll",e),e.$inject=["$document","$window","$compile"]}();